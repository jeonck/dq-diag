# 데이터베이스 품질 진단 툴 사용 가이드

## 빠른 시작

### 1. 설치 및 실행

```bash
# 프로젝트 디렉토리로 이동
cd /Users/mac/ws/claude/dq-tool

# 의존성 패키지 설치
pip install -r requirements.txt

# Streamlit 앱 실행
streamlit run app.py
```

실행 후 브라우저에서 `http://localhost:8501`로 자동 접속됩니다.

---

## 샘플 데이터로 테스트하기

### 방법 1: 샘플 데이터 버튼 사용
1. 왼쪽 사이드바에서 **"📂 샘플 데이터 사용"** 버튼 클릭
2. 진단할 지표 선택 (기본값 사용 권장)
3. **"🚀 진단 시작"** 버튼 클릭

### 방법 2: CSV 파일 업로드
1. 왼쪽 사이드바에서 **"CSV 파일 업로드"** 클릭
2. `sample_data/sample_customer.csv` 또는 `sample_data/sample_product.csv` 선택
3. 진단 시작

---

## 샘플 데이터 설명

### sample_customer.csv (고객 데이터)

**포함된 컬럼:**
- 고객ID, 고객명, 이메일, 전화번호
- 가입일자, 최종수정일, 생년월일
- 나이, 성별YN, 회원등급코드
- 구매금액, 구매건수
- 주소, 카드번호

**의도적으로 포함된 품질 이슈:**

1. **완전성 이슈**
   - 일부 컬럼에 NULL 값 존재
   - 마지막 행의 중복 레코드 (C030)

2. **일관성 이슈**
   - 성별YN: Y/y 혼용
   - 회원등급코드: VIP/GOLD/SILVER/NORMAL과 gold 혼용
   - 전화번호: 하이픈 있음/없음 혼용

3. **정확성 이슈**
   - 나이: 음수(-5), 비정상적 값(150, 250)
   - 전화번호: 잘못된 형식 (C026: "invalid-phone", C011: 없음)
   - 이메일: 일부 누락
   - 카드번호: 형식 불일치 (하이픈 유무, 길이)

4. **보안성 이슈**
   - 이메일 주소 평문 노출
   - 전화번호 평문 노출
   - 카드번호 평문 저장

5. **적시성 이슈**
   - 오래된 데이터: C027 (2020년 가입)
   - 미래 날짜: C029 (최종수정일 2030-12-31)
   - 갱신되지 않은 데이터: 일부 최종수정일 누락

### sample_product.csv (상품 데이터)

**포함된 컬럼:**
- 상품코드, 상품명, 카테고리코드
- 가격, 재고수량
- 등록일자, 최종수정일
- 판매여부, 할인율
- 제조사, 무게, 상품설명

**의도적으로 포함된 품질 이슈:**

1. **완전성 이슈**
   - 일부 컬럼에 NULL 값 (제조사, 무게, 상품설명)
   - 마지막 행의 중복 레코드 (P030)

2. **일관성 이슈**
   - 카테고리코드: ELEC/elec 혼용
   - 판매여부: Y/y 혼용

3. **정확성 이슈**
   - 재고수량: 음수 값 (P004: -10)
   - 할인율: 음수 값 (P009: -5)
   - 할인율: 100 초과 (P007: 200)

4. **적시성 이슈**
   - 오래된 데이터: P027 (2020년 등록)
   - 미래 날짜: P026 (최종수정일 2030-01-01)
   - 일부 최종수정일 누락

---

## 진단 결과 해석

### 전체 품질 점수
- **90점 이상** 🟢 우수: 높은 품질의 데이터
- **70-89점** 🟡 양호: 양호한 품질, 일부 개선 필요
- **50-69점** 🟠 보통: 여러 개선사항 존재
- **50점 미만** 🔴 미흡: 즉각적인 개선 필요

### 이슈 심각도
- **🔴 높음**: 즉시 수정 필요 (데이터 정확성에 중대한 영향)
- **🟡 중간**: 개선 권장 (데이터 품질 향상 필요)
- **🟢 낮음**: 참고 사항 (우선순위 낮음)

---

## 각 진단 지표별 상세 설명

### 1. 완전성 (Completeness)

**측정 항목:**
- 기본키(PK) 미정의: 중복 레코드 존재 여부
- NULL 값: 각 컬럼별 NULL 비율
- 미사용 컬럼: 값이 없거나 무의미한 컬럼
- 데이터 타입 불일치: 숫자형인데 문자형으로 저장된 경우

**샘플 데이터에서 발견될 이슈:**
- 중복 레코드: 마지막 행이 동일하게 반복
- NULL 값: 이메일, 전화번호, 카드번호 등에서 발견
- 미사용 컬럼: 상품설명 등 일부 컬럼에서 값이 거의 없음

### 2. 일관성 (Consistency)

**측정 항목:**
- 컬럼명 명명 규칙: 공백, 특수문자, 대소문자 혼용
- 데이터 타입 일관성: 같은 유형의 컬럼이 다른 타입
- 중복 레코드: 완전히 동일한 행
- 코드값 일관성: 대소문자 혼용 (Y/y, GOLD/gold)
- 날짜 형식: 다양한 날짜 형식 혼재

**샘플 데이터에서 발견될 이슈:**
- 코드값 불일치: 성별YN (Y/y), 회원등급코드 (GOLD/gold)
- 중복 레코드: 동일 데이터 2회 입력

### 3. 정확성 (Accuracy)

**측정 항목:**
- 도메인 정확성: Y/N 값이 아닌 다른 값
- 범위 정확성: 음수 재고, 100% 초과 할인율, 비정상 나이
- 형식 정확성: 이메일, 전화번호 형식
- 날짜 유효성: 존재할 수 없는 날짜
- 논리적 일관성: 시작일 > 종료일

**샘플 데이터에서 발견될 이슈:**
- 나이 범위 오류: -5세, 150세, 250세
- 재고 음수: -10개
- 할인율 오류: -5%, 200%
- 전화번호 형식: "invalid-phone", 하이픈 없는 형식
- 카드번호 형식: 다양한 형식 혼재

### 4. 보안성 (Security)

**측정 항목:**
- 개인정보 노출: 이메일, 전화번호, 주민등록번호, 카드번호
- 민감정보: 비밀번호, 계좌정보, 건강정보
- 암호화 필요: 긴 숫자 문자열 (카드번호, 계좌번호)

**샘플 데이터에서 발견될 이슈:**
- 이메일 주소 평문 저장
- 전화번호 평문 저장
- 카드번호 평문 저장 (일부 데이터)

### 5. 적시성 (Timeliness)

**측정 항목:**
- 데이터 최신성: 마지막 수정일로부터 경과 일수
- 갱신 주기: 불규칙한 갱신 주기
- 미래 날짜: 현재보다 미래의 날짜

**샘플 데이터에서 발견될 이슈:**
- 오래된 데이터: 2020년 데이터
- 미래 날짜: 2030년 날짜
- 갱신 누락: 최종수정일이 비어있는 레코드

### 6. 유용성 (Usability)

**측정 항목:**
- 데이터 충분성: 레코드 수가 너무 적은 경우
- 컬럼 유용성: 값이 거의 없는 컬럼
- 데이터 다양성: 모든 값이 동일하거나 너무 다양한 경우

**샘플 데이터에서 발견될 이슈:**
- 일부 컬럼의 낮은 채움율
- 특정 컬럼의 다양성 부족

---

## 실제 데이터 진단 시 주의사항

### 1. 데이터 준비
```csv
# CSV 파일 형식 요구사항
- 인코딩: UTF-8 권장
- 첫 번째 행: 컬럼명 (헤더)
- 구분자: 쉼표(,)
```

### 2. 진단 전 체크리스트
- [ ] CSV 파일이 UTF-8로 인코딩되어 있는가?
- [ ] 첫 번째 행에 컬럼명이 포함되어 있는가?
- [ ] 파일 크기가 너무 크지 않은가? (권장: 100MB 이하)

### 3. 진단 결과 활용
1. **이슈 우선순위 지정**
   - 🔴 높음 이슈부터 해결
   - 보안성 > 정확성 > 완전성 > 일관성 순서 권장

2. **개선 계획 수립**
   - 단기: 명백한 오류 수정 (음수 값, 형식 오류)
   - 중기: 일관성 개선 (명명 규칙, 코드 표준화)
   - 장기: 프로세스 개선 (입력 검증, 자동화)

3. **정기적 모니터링**
   - 월 1회 또는 분기 1회 정기 진단
   - 신규 데이터 추가 시 진단

---

## 문제 해결

### Q1: "ModuleNotFoundError" 오류가 발생합니다.
```bash
# 해결 방법
pip install -r requirements.txt
```

### Q2: 한글이 깨져 보입니다.
```python
# CSV 파일 인코딩 변경
# Excel에서: 다른 이름으로 저장 > CSV UTF-8 선택
```

### Q3: 파일 업로드가 안 됩니다.
```bash
# Streamlit 설정 파일 생성 (.streamlit/config.toml)
[server]
maxUploadSize = 200
```

### Q4: 진단 속도가 느립니다.
- 대용량 파일의 경우 샘플링하여 진단 (상위 10,000건)
- 불필요한 진단 지표 해제

---

## 추가 기능 제안

진단 결과를 바탕으로 다음과 같은 활용이 가능합니다:

1. **자동 보고서 생성**
   - PDF 리포트 다운로드
   - Excel 형식 상세 보고서

2. **데이터 정제**
   - 발견된 이슈를 자동으로 수정
   - 수정 전/후 비교

3. **대시보드**
   - 시계열 품질 추이
   - 지표별 점수 변화

4. **알림 기능**
   - 품질 점수가 기준 이하일 때 알림
   - 정기 진단 스케줄링

---

## 참고 자료

- 공공데이터 품질관리 매뉴얼
- ISO/IEC 25012 (데이터 품질 모델)
- DAMA-DMBOK (데이터 관리 지식체계)

## 지원

문제가 발생하거나 개선 제안이 있으시면 GitHub 이슈를 등록해주세요.
